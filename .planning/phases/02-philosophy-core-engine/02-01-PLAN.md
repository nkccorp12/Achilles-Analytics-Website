---
phase: 02-philosophy-core-engine
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/hooks/useMediaQuery.js
  - src/variants/VariantGrid.jsx
  - src/components/CardSwap.css
  - src/variants/VariantGrid.css
autonomous: true

must_haves:
  truths:
    - "CardSwap carousel fits within 360px viewport with no horizontal scroll"
    - "Philosophy section handles overflow correctly on mobile"
    - "CardSwap cards scale proportionally on mobile and tablet"
  artifacts:
    - path: "src/hooks/useMediaQuery.js"
      provides: "Custom hook for responsive breakpoint detection"
      exports: ["useMediaQuery"]
    - path: "src/variants/VariantGrid.jsx"
      provides: "Responsive CardSwap dimensions via useMediaQuery"
      contains: "useMediaQuery"
    - path: "src/components/CardSwap.css"
      provides: "Responsive card styling for mobile"
      contains: "@media"
    - path: "src/variants/VariantGrid.css"
      provides: "Philosophy panel overflow and height fixes"
      contains: "overflow"
  key_links:
    - from: "src/hooks/useMediaQuery.js"
      to: "src/variants/VariantGrid.jsx"
      via: "import useMediaQuery"
      pattern: "import.*useMediaQuery.*from.*hooks/useMediaQuery"
    - from: "src/variants/VariantGrid.jsx"
      to: "src/components/CardSwap.jsx"
      via: "responsive width/height/cardDistance/verticalDistance props"
      pattern: "width=.*cardWidth|width=.*dimensions"
---

<objective>
Make the CardSwap carousel and Philosophy section fully responsive on mobile and tablet viewports.

Purpose: The CardSwap component uses inline styles (width/height) that CSS media queries cannot override. A useMediaQuery hook is needed to detect breakpoints and pass responsive dimensions as props. The philosophy panel also needs overflow containment and reduced min-height on mobile.

Output: Responsive CardSwap that fits 360px screens, properly contained Philosophy panel
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/CardSwap.jsx
@src/components/CardSwap.css
@src/variants/VariantGrid.jsx
@src/variants/VariantGrid.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create useMediaQuery hook and wire responsive CardSwap props</name>
  <files>
    src/hooks/useMediaQuery.js
    src/variants/VariantGrid.jsx
  </files>
  <action>
    1. Create `src/hooks/useMediaQuery.js` with a custom React hook:
       - Accept a media query string (e.g., "(max-width: 640px)")
       - Use `window.matchMedia` to evaluate the query
       - Return a boolean indicating whether the query matches
       - Listen for changes via `matchMedia.addEventListener("change", ...)` and update state
       - Clean up listener on unmount
       - Handle SSR safety with initial `false` state and `useEffect` for hydration

    2. In `src/variants/VariantGrid.jsx`, import and use the hook in `PhilosophySection`:
       - `import { useMediaQuery } from '../hooks/useMediaQuery';`
       - Add two breakpoint checks inside PhilosophySection:
         ```
         const isMobile = useMediaQuery('(max-width: 640px)');
         const isTablet = useMediaQuery('(max-width: 1024px)');
         ```
       - Compute responsive dimensions:
         - Mobile (<=640px): width=280, height=240, cardDistance=25, verticalDistance=30
         - Tablet (<=1024px): width=320, height=280, cardDistance=32, verticalDistance=40
         - Desktop: width=380, height=320, cardDistance=40, verticalDistance=50 (current values)
       - Pass computed values as props to `<CardSwap>`:
         ```
         <CardSwap
           width={cardWidth}
           height={cardHeight}
           cardDistance={cardDist}
           verticalDistance={vertDist}
           ...
         >
         ```

    IMPORTANT: Do NOT try to use CSS to override CardSwap dimensions — the component applies inline styles via `style={{ width, height }}` which have higher specificity than any CSS rule. The hook approach is the only correct solution.
  </action>
  <verify>
    - `src/hooks/useMediaQuery.js` exports a named `useMediaQuery` function
    - `src/variants/VariantGrid.jsx` imports and uses `useMediaQuery`
    - No lint/syntax errors: the dev server compiles without errors
    - Resize browser to 360px width — CardSwap container should be 280px wide (fits with margins)
  </verify>
  <done>
    CardSwap renders at 280x240 on mobile (<=640px), 320x280 on tablet (<=1024px), 380x320 on desktop. No horizontal overflow on 360px viewport.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add CardSwap responsive CSS and fix Philosophy panel overflow</name>
  <files>
    src/components/CardSwap.css
    src/variants/VariantGrid.css
  </files>
  <action>
    1. In `src/components/CardSwap.css`, add responsive media queries AFTER the existing rules:

       At 1024px breakpoint:
       - `.card-swap-container` — no changes needed (dimensions come from props)

       At 640px breakpoint:
       - `.card-swap__card` — reduce border-radius to 6px
       - `.card-swap-container` — add `margin: 0 auto` to center within parent

    2. In `src/variants/VariantGrid.css`, fix the Philosophy panel:

       In the EXISTING `@media (max-width: 1024px)` block:
       - `.vg-philosophy__panel` already has `min-height: 300px` — KEEP this
       - ADD `overflow: hidden` to `.vg-philosophy__panel`

       In the EXISTING `@media (max-width: 640px)` block, ADD these rules:
       - `.vg-philosophy__panel` — `min-height: 250px; overflow: hidden;`
       - `.vg-philosophy__card-img` — `height: 100px` (reduce from 140px to fit smaller cards)
       - `.vg-philosophy__card-body` — `padding: 12px` (reduce from 20px)
       - `.vg-philosophy__card-title` — `font-size: 1rem` (reduce from 1.25rem)
       - `.vg-philosophy__card-desc` — `font-size: 0.75rem` (reduce from 0.8rem)

    IMPORTANT: Add these rules INSIDE the existing media query blocks — do not create duplicate @media blocks.
  </action>
  <verify>
    - `src/components/CardSwap.css` has at least one @media block
    - `src/variants/VariantGrid.css` has `overflow: hidden` in the 1024px block for `.vg-philosophy__panel`
    - `src/variants/VariantGrid.css` has `min-height: 250px` in the 640px block for `.vg-philosophy__panel`
    - Dev server compiles without errors
    - At 360px width: Philosophy panel clips content properly, card text is readable
  </verify>
  <done>
    Philosophy panel has overflow:hidden at tablet and mobile breakpoints. Card inner content (image, text) scales down proportionally on mobile. No content spills outside the panel container.
  </done>
</task>

</tasks>

<verification>
1. Open browser at 360px viewport width — no horizontal scrollbar appears
2. CardSwap carousel is visible and contained within the viewport
3. Philosophy section text and card carousel both visible without overlap
4. Resize from 360px through 768px to 1024px+ — smooth transitions between sizes
5. GSAP card animation still functions correctly at all sizes
</verification>

<success_criteria>
- CardSwap displays at 280x240 on 360px screens with no horizontal overflow
- Philosophy panel has overflow:hidden on mobile and tablet
- Philosophy panel min-height reduces to 250px on mobile
- Card content (images, text) scales proportionally
- No regressions on desktop layout
</success_criteria>

<output>
After completion, create `.planning/phases/02-philosophy-core-engine/02-01-SUMMARY.md`
</output>
